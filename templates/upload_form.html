<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Uploading data</title>
	<link rel="stylesheet" type="text/css" href="homee.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #f2f2f2;
}

.topnav {
  overflow: hidden;
  background-color: #333;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #4CAF50;
  color: white;
}
/* resposivness */
.topnav .icon {
  display: none;
}

.container {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}
* {box-sizing: border-box;}

input[type=text], select, textarea {
  width: 15%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  /* box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px; */
  resize: vertical;
}
input[type=number], select, textarea {
  width: 15%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  /* box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px; */
  resize: vertical;

}
input[type=submit] {
  background-color: #4CAF50;
  color: white;
  padding: 12px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  
}
input[type=submit]:hover {
  background-color: #45a049;
  
}

.hidden {
            display: none;
        }

/*why needed this? */
.dropbtn {
  background-color: #4CAF50;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
}


/* responsive navigation */
  @media screen and (max-width: 650px) {
  .topnav a:not(.active) {display: none;}
  .topnav a.icon {
    float: right;
    display: block;
  } 
 }

@media screen and (max-width: 650px) {
  .topnav.responsive {position: relative;}
  .topnav.responsive a.icon {
    position: absolute;
    right: 0;
    top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
}

/* Style the form container */
form {
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    /* box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.2); */
    margin: 20px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

/* Style the labels
label {
    font-weight: bold;
    color: #333;
    margin-bottom: 15px;
} */

/* Style the file input fields */
input[type="file"] {
    width: 100%;
    padding: 5px;
    margin-bottom: 15px;
    border: 1px solid #ffffff;
    border-radius: 3px;
}

/* Style the date and time input fields */
input[type="date"],
input[type="time"] {
    width: 100%;
    padding: 5px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 3px;
}

/* Style the checkboxes */
input[type="checkbox"] {
    margin-right: 5px;
}

/* Style the error messages */
/* .error {
    color: #ff0000;
    font-weight: bold;
} */

/* Style the heading for selected years */
#strengthHeading {
    text-align: center;
    color: #333;
    margin-top: 20px;
}

/* Style the list of selected years' strengths */
ul {
    list-style-type: none;
    padding: 0;
}

li {
    color: #555;
    margin-bottom: 5px;
}

/* Style the upload errors */
.upload-errors {
    color: #ff0000;
    font-weight: bold;
    list-style-type: none;
    padding: 0;
}
#submission{text-align: center;}
@media screen and  (min-width: 1170px) {
  form{
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    /* box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.2); */
    margin-left: 340px;
    margin-right: 340px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  }
}

</style>
<script>
  // responsive
  function myFunction() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
      x.className += " responsive";
    } else {
      x.className = "topnav";
    }
  
  }
    function validateForm() {
        var selectedYears = document.querySelectorAll('input[name="select_year"]:checked');
        if (selectedYears.length === 0) {
            alert("Please select at least one year and upload files.");
            return false;  // Prevent the form from submitting
        }
    }
    function showUploadMessage() {
            alert("File uploaded successfully.");
        }
        function showHeading() {
            var heading = document.getElementById("strengthHeading");
            var fileInputs = document.querySelectorAll('input[type="file"]');

        // Check if at least one file input has a file selected
        var filesSelected = Array.from(fileInputs).some(input => input.files.length > 0);

        if (filesSelected) {
            heading.classList.remove("hidden");
        }
        }
</script>

</head>
<body>
  <!----NAVIGATION BARS----->
  <div class="topnav" id="myTopnav">
  <a  href="/admin">Dashboard</a>
  <a  href="/addroom">Add Room</a>
  <a class="active" href="/upload_form">Upload</a>
  <a href="/generate">Generate</a>
  <a href="/login">Logout</a>
  <a href="javascript:void(0);" class="icon" onclick="myFunction()">
    <i class="fa fa-bars"></i>
  </a>
</div>

   

<form action="/upload_form" method="POST" enctype="multipart/form-data" onsubmit="return validateForm();">
  <!-- <h2>Upload CSV Files</h2> -->
        
  <!-- <input type="hidden" id="uploadErrors" value="{{ upload_errors|join('\n') }}"> -->
        <!-- we can use either error display method using js -->
        <!-- Display general error message if it exists
    {% if error %}
    <p class="error">{{ error }}</p>
    {% endif %} -->
    <fieldset style=" margin-left: 20px;margin-right: 20px; background-color: #ffffff;">
      <legend style="font-size: 20px; font-family: 'Times New Roman', Times, 
      serif;">Upload CSV Files(year wise):-</legend>
        <label for="2nd_year_csv">2nd Year:</label>
        <input type="file" name="2nd_year_csv" id="2nd_year_csv" accept=".csv" onload="showUploadMessage()"><br>
        
        <label for="3rd_year_csv">3rd Year:</label>
        <input type="file" name="3rd_year_csv" id="3rd_year_csv" accept=".csv" onload="showUploadMessage()" ><br>
        
        <label for="4th_year_csv">4th Year:</label>
        <input type="file" name="4th_year_csv" id="4th_year_csv" accept=".csv"onload="showUploadMessage()" ><br>
    </fieldset><br>
    <fieldset style=" margin-left: 20px;margin-right: 20px; background-color:#ffffff;">
      <legend style="font-size: 20px; font-family: 'Times New Roman', Times, 
      serif;">Enter Date and Time:-</legend>
        <!-- <h2>Enter Date and Time:</h2> -->
        <label for="date">Date:</label>
        <input type="date" name="date" id="date" ><br>
        
        <label for="time">Time:</label>
        <input type="time" name="time" id="time"><br>
      </fieldset><br>
      <fieldset style="margin-left: 20px; margin-right: 20px;background-color:  #ffffff;">
        <legend style="font-size: 20px; font-family: 'Times New Roman', Times, 
        serif;">Select Year(s):</legend>
  
        <label for="select_2nd_year">2nd Year</label>
        <input type="checkbox" name="select_year" value="2nd" id="select_2nd_year"><br>
        
        <label for="select_3rd_year">3rd Year</label>
        <input type="checkbox" name="select_year" value="3rd" id="select_3rd_year"><br>
        
        <label for="select_4th_year">4th Year</label>
        <input type="checkbox" name="select_year" value="4th" id="select_4th_year"><br>
       </fieldset><br>
        <h2 id="strengthHeading" class="hidden">Total Strength of Selected years</h2>
        
        <ul>
            {% for year, strength in total_strengths.items() %}
            <li>{{ year }} Year Total Strength: {{ strength }} students</li>
            {% endfor %}
        </ul>
        <!-- Display uploading error messages if they exist -->
        {% if upload_errors %}
        <ul class="upload-errors">
            {% for upload_error in upload_errors %}
            <li>{{ upload_error }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        <p id="submission">
        <input type="submit" value="Upload and Process" onclick="showHeading();" >
      </p>
    </form>
    
    
</body>
</html>