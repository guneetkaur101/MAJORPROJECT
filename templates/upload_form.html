<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Uploading data</title>
	<link rel="stylesheet" type="text/css" href="homee.css">
<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

.topnav {
  overflow: hidden;
  background-color: #333;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #4CAF50;
  color: white;
}
.container {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}
* {box-sizing: border-box;}

input[type=text], select, textarea {
  width: 15%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px;
  resize: vertical;
}
input[type=number], select, textarea {
  width: 15%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px;
  resize: vertical;

}
input[type=submit] {
  background-color: #4CAF50;
  color: white;
  padding: 12px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  
}
input[type=submit]:hover {
  background-color: #45a049;
}


.dropbtn {
  background-color: #4CAF50;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
}




</style>
<script>
 
    function validateForm() {
        var selectedYears = document.querySelectorAll('input[name="select_year"]:checked');
        if (selectedYears.length === 0) {
            alert("Please select at least one year and upload files.");
            return false;  // Prevent the form from submitting
        }
    }
    function showUploadMessage() {
            alert("File uploaded successfully.");
        }
        function displayUploadErrors() {
            var uploadErrors = document.getElementById('uploadErrors').value;
            if (uploadErrors) {
                alert("Upload Errors:\n" + uploadErrors);
                return false;
            }
        }
</script>

</head>
<body>
  <!----NAVIGATION BARS----->
  <div class="topnav">
  <a  href="/admin">Dashboard</a>
  <a  href="/addroom">Add Room</a>
  <a class="active" href="/upload_form">Upload</a>
  <a href="/Generate">Generate</a>
  <a  href="/result">Show Result</a>
  <a href="/login">Logout</a>
</div>
<!-- <div class="container">
  <form action="" method="POST" enctype="multipart/form-data">
  <h1>Upload CSV Files for 2nd, 3rd, and 4th Year Students</h1><br>
  {% if error%}
  <h4>{{error}}</h4>
  {%endif%}
  <!-- <label>Select Room</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <select id="browser" name="room">
    {% for row in room_no %}
    {%for no in row %}
    <option value={{no}}>{{no}}</option>
    {% endfor %}
    {% endfor %}
  </select>&nbsp;&nbsp;&nbsp;&nbsp; -->
  
  <!-- <br><label><strong>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Upload CSV Files for 2nd, 3rd, and 4th Year Students &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</strong></label> -->
  
  <!-- <h2>2nd Year CSV:</h2>
  <input type="file" name="2nd_year_csv" accept=".csv"><br>

  <h2>3rd Year CSV:</h2>
  <input type="file" name="3rd_year_csv" accept=".csv"><br>

  <h2>4th Year CSV:</h2>
  <input type="file" name="4th_year_csv" accept=".csv"><br>

  <input type="submit" value="Upload CSV Files">

  </form>
  {% if error %}
  <p>{{ error }}</p>
  {% endif %}

  {% if uploaded_files %}
  <h2>Uploaded Files:</h2>
  <ul>
      {% for filename in uploaded_files %}
      <li>{{ filename }}</li>
      {% endfor %}
  </ul>
  {% endif %}

</div>  --> 
<h1>Upload CSV Files</h1>
    
<form action="/upload_form" method="POST" enctype="multipart/form-data" onsubmit="return validateForm();">
        
  <input type="hidden" id="uploadErrors" value="{{ upload_errors|join('\n') }}">
        <!-- we can use either error display method using js -->
        <!-- Display general error message if it exists
    {% if error %}
    <p class="error">{{ error }}</p>
    {% endif %} -->
        <label for="2nd_year_csv">2nd Year:</label>
        <input type="file" name="2nd_year_csv" id="2nd_year_csv" accept=".csv" onload="showUploadMessage()"><br>
        
        <label for="3rd_year_csv">3rd Year:</label>
        <input type="file" name="3rd_year_csv" id="3rd_year_csv" accept=".csv" onload="showUploadMessage()" ><br>
        
        <label for="4th_year_csv">4th Year:</label>
        <input type="file" name="4th_year_csv" id="4th_year_csv" accept=".csv"onload="showUploadMessage()" ><br>

        <h2>Enter Date and Time:</h2>
        <label for="date">Date:</label>
        <input type="date" name="date" id="date" ><br>
        
        <label for="time">Time:</label>
        <input type="time" name="time" id="time"><br>
        
        <h2>Select Year(s):</h2>
        <label for="select_2nd_year">2nd Year</label>
        <input type="checkbox" name="select_year" value="2nd" id="select_2nd_year"><br>
        
        <label for="select_3rd_year">3rd Year</label>
        <input type="checkbox" name="select_year" value="3rd" id="select_3rd_year"><br>
        
        <label for="select_4th_year">4th Year</label>
        <input type="checkbox" name="select_year" value="4th" id="select_4th_year"><br>

        <h2>Total Strength of Selected years</h2>
        <ul>
            {% for year, strength in total_strengths.items() %}
                <li>{{ year }} Total Strength: {{ strength }}</li>
            {% endfor %}
        </ul>
        <!-- Display uploading error messages if they exist
        {% if upload_errors %}
        <ul class="upload-errors">
            {% for upload_error in upload_errors %}
            <li>{{ upload_error }}</li>
            {% endfor %}
        </ul>
        {% endif %} -->
        <input type="submit" value="Upload and Process" onclick="displayUploadErrors();">

    </form>
    
    
</body>
</html>